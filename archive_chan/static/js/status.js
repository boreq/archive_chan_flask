var statsData,timeout;$(window).resize(function(){drawChart(statsData)});$(document).ready(function(){update();$(".last-update-info").on("click","#update-now",function(){update()})});function update(){clearTimeout(timeout);$("#update-now i").addClass("fa-spin");var a=$.ajax({url:info_data.api_url,dataType:"json"}).done(function(c){statsData=c.chart_data;drawData(c);drawChart(c.chart_data);var b=new Date();$("#last-update").attr("datetime",b.toISOString()).attr("title",b).data("timeago",null).timeago()}).always(function(){timeout=setTimeout(update,30*1000);$("#update-now i").removeClass("fa-spin")})}function drawData(f){$("#value-last-updates").empty();var e=f.last_updates.length;for(var b=0;b<e;b++){var d=f.last_updates[b];var a=null;if(d.status==2){a=d.end}else{a=d.start}var c=["started","failed","completed"];$("#value-last-updates").append('<li class="update '+c[d.status]+'">'+d.board+" "+d.status_verbose.toLowerCase()+' <time class="timeago" datetime="'+a+'">'+a+"</time></li>")}$("#value-last-updates li time").data("timeago",null).timeago()}function drawChart(b){var a={color:"#65c6bb",data:b,label:"Seconds per post"};$.plot("#chart",[a],{bars:{show:true,lineWidth:1,barWidth:24*60*60*1000},legend:{show:false},xaxis:{mode:"time",minTickSize:[1,"day"]}})};